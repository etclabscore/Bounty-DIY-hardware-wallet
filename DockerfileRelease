FROM node:10.18.0

WORKDIR /tmp

ADD package.json package.json
RUN yarn install --unsafe-perm --network-timeout 100000

ARG NODE_PATH
ARG REACT_APP_INFURA_API_KEY
ADD src src
ADD public public
RUN NODE_PATH=$NODE_PATH REACT_APP_INFURA_API_KEY=$REACT_APP_INFURA_API_KEY npm run build

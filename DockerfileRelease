FROM node:10.18.0 AS builder

WORKDIR /tmp

ADD package.json package.json
ADD yarn.lock yarn.lock
RUN yarn install --unsafe-perm --network-timeout 100000 --verbose

ARG NODE_PATH
ARG REACT_APP_INFURA_API_KEY
ADD src src
ADD public public
ADD jsconfig.json jsconfig.json
RUN REACT_APP_INFURA_API_KEY=$REACT_APP_INFURA_API_KEY npm run build
